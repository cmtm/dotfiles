# Aliases
alias igit="git --no-pager"
alias info="info --vi-keys"
alias mkdir="mkdir -p -v"
alias trsh="mv --target-directory=$HOME/trash"
alias v="nvim"
alias gt="gnome-terminal"
alias -g lswt="~/lightsource-worktrees"

# Vi mode
bindkey -v
export KEYTIMEOUT=1

# History
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt inc_append_history_time
setopt hist_find_no_dups
setopt hist_reduce_blanks

# Colors for ls
if [[ -f ~/.dir_colors ]] ; then
    eval $(dircolors -b ~/.dir_colors)
fi

# PATH
PATH=$PATH:~/bin:$HOME/.cargo/bin:$DENO_INSTALL/bin

# Editor
if [[ -n $SSH_CONNECTION ]]; then
  export EDITOR='vim'
else
  export EDITOR='nvim'
fi

function up() {
    # default to 1
    declare -i d=${@:-1};
    # ensure non-negative
    (($d < 0)) && (>&2 echo "up: Error: negative value provided") && return 1;
    # remove last d directories from pwd, append "/" in case result is empty
    cd "$(pwd | sed -E 's;(/[^/]*){0,'$d'}$;;')/";
}

# Completions
autoload -Uz compinit && compinit
autoload -U +X bashcompinit && bashcompinit
complete -o nospace -C /usr/bin/terraform terraform
eval "$(gh copilot alias -- zsh)"

# bun completions
[ -s "/home/chris/.bun/_bun" ] && source "/home/chris/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"
